
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../tools/">
      
      
        <link rel="next" href="../constraints/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Entities - CAD Sketcher</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#active" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CAD Sketcher" class="md-header__button md-logo" aria-label="CAD Sketcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CAD Sketcher
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Entities
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CAD Sketcher" class="md-nav__button md-logo" aria-label="CAD Sketcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CAD Sketcher
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User interface
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active" class="md-nav__link">
    <span class="md-ellipsis">
      Active
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility" class="md-nav__link">
    <span class="md-ellipsis">
      Visibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#construction" class="md-nav__link">
    <span class="md-ellipsis">
      Construction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed" class="md-nav__link">
    <span class="md-ellipsis">
      Fixed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPoint3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPoint3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsLine3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine3D.closest_picking_point" class="md-nav__link">
    <span class="md-ellipsis">
      closest_picking_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsNormal3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsNormal3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsWorkplane" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsWorkplane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsSketch" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsSketch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPoint2D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPoint2D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsLine2D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.closest_picking_point" class="md-nav__link">
    <span class="md-ellipsis">
      closest_picking_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.connection_angle" class="md-nav__link">
    <span class="md-ellipsis">
      connection_angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.direction" class="md-nav__link">
    <span class="md-ellipsis">
      direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.normal" class="md-nav__link">
    <span class="md-ellipsis">
      normal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.orientation" class="md-nav__link">
    <span class="md-ellipsis">
      orientation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.project_point" class="md-nav__link">
    <span class="md-ellipsis">
      project_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsArc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.angle" class="md-nav__link">
    <span class="md-ellipsis">
      angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.connection_angle" class="md-nav__link">
    <span class="md-ellipsis">
      connection_angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.direction" class="md-nav__link">
    <span class="md-ellipsis">
      direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.normal" class="md-nav__link">
    <span class="md-ellipsis">
      normal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.project_point" class="md-nav__link">
    <span class="md-ellipsis">
      project_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsCircle" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsCircle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../constraints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constraints
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../solver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solver
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../interaction_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interaction system
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Documentation
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active" class="md-nav__link">
    <span class="md-ellipsis">
      Active
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#visibility" class="md-nav__link">
    <span class="md-ellipsis">
      Visibility
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#construction" class="md-nav__link">
    <span class="md-ellipsis">
      Construction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed" class="md-nav__link">
    <span class="md-ellipsis">
      Fixed
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPoint3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPoint3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsLine3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine3D.closest_picking_point" class="md-nav__link">
    <span class="md-ellipsis">
      closest_picking_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsNormal3D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsNormal3D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsWorkplane" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsWorkplane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsSketch" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsSketch
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPoint2D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPoint2D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsLine2D
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.closest_picking_point" class="md-nav__link">
    <span class="md-ellipsis">
      closest_picking_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.connection_angle" class="md-nav__link">
    <span class="md-ellipsis">
      connection_angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.direction" class="md-nav__link">
    <span class="md-ellipsis">
      direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.normal" class="md-nav__link">
    <span class="md-ellipsis">
      normal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.orientation" class="md-nav__link">
    <span class="md-ellipsis">
      orientation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsLine2D.project_point" class="md-nav__link">
    <span class="md-ellipsis">
      project_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsArc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.angle" class="md-nav__link">
    <span class="md-ellipsis">
      angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.connection_angle" class="md-nav__link">
    <span class="md-ellipsis">
      connection_angle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.direction" class="md-nav__link">
    <span class="md-ellipsis">
      direction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.normal" class="md-nav__link">
    <span class="md-ellipsis">
      normal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsArc.project_point" class="md-nav__link">
    <span class="md-ellipsis">
      project_point
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsCircle" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsCircle
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Entities</h1>

<p>Entities are the basic elements which are used to draw geometry in CAD Sketcher. They differ from regular blender mesh or curve elements which means native blender tools aren't able to interact with it as long as they aren't converted. See the chapter <a href="../integration/">integration</a> for further details on how to process extension specific geometry.</p>
<p>Entities are defined by a set of parameters and pointers to other entities which are editable at any point in time. This allows non-destructive workflows and also ensures that geometry is resolution independent. A curve will always follow a given radius no matter how it's transformed. Entities can be created with the various <a href="../user_interface/#workspacetools">Workspacetools</a>.</p>
<!-- TODO: DOF -->

<h2 id="active">Active</h2>
<p>An entity is considered to be active when the sketch it belongs to is set as the active
sketch or, for 3D entities, when no sketch is active.</p>
<h2 id="visibility">Visibility</h2>
<p>Entities can be hidden. Access the setting from the entity's <a href="user_interface#context-menu">context menu</a>
or from the <a href="user_interface#Entity-Browser">entity browser</a>.</p>
<h2 id="construction">Construction</h2>
<p>Entities have a construction parameter which can be set via the entity's <a href="user_interface#context-menu">context menu</a>. If it's set to true the entity will be ignored when converting the geometry however it's still used to solve the geometric system. It's generally good practice to mark entities as construction if they're not part of the final geometry.</p>
<h2 id="fixed">Fixed</h2>
<p>Entities can be fixed via the entity's <a href="user_interface#context-menu">context menu</a>. A fixed entity won't have any degrees of freedom and therefor cannot be adjusted by the solver. It's good practice to base geometry on a fixed origin point.</p>
<blockquote>
<p><img alt="⚠️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/26a0.png" title=":warning:" /><strong>Warning:</strong> While this currently applies to all entities it's intended to be used with points only.</p>
</blockquote>
<h2 id="types">Types</h2>
<p>There are different types of entities, some of them apply in 2 dimensional space which requires a <a href="#CAD_Sketcher.model.types.SlvsSketch">sketch</a> as a parameter.</p>
<blockquote>
<p>Entity types follow the implementation of <a href="https://solvespace.readthedocs.io/en/latest/entities/index.html">solvespace</a>.</p>
<p>Only 2D entities can be converted later, check the chapter <a href="../integration/">integration</a> for details.</p>
</blockquote>


<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsPoint3D"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.point_3d.Point3D">Point3D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a point in 3D Space.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>location</code></td>
            <td>
                  <code><span title="bpy.props.FloatVectorProperty">FloatVectorProperty</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Point's location in the form (x, y, z)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/point_3d.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsPoint3D</span><span class="p">(</span><span class="n">Point3D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a point in 3D Space.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        location (FloatVectorProperty): Point&#39;s location in the form (x, y, z)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">location</span><span class="p">:</span> <span class="n">FloatVectorProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Location&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The location of the point&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;XYZ&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;LENGTH&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">SlvsGenericEntity</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;location&quot;</span><span class="p">,)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;location&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsLine3D"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.SlvsGenericEntity">SlvsGenericEntity</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a line in 3D Space.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>p1</code></td>
            <td>
                  <code><span title="SlvsPoint3D">SlvsPoint3D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line's startpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>p2</code></td>
            <td>
                  <code><span title="SlvsPoint3D">SlvsPoint3D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line's endpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/line_3d.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsLine3D</span><span class="p">(</span><span class="n">SlvsGenericEntity</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a line in 3D Space.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        p1 (SlvsPoint3D): Line&#39;s startpoint</span>
<span class="sd">        p2 (SlvsPoint3D): Line&#39;s endpoint</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_line</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_segment</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_dashed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shader</span><span class="p">,</span> <span class="s2">&quot;LINES&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_line_3d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_data</span> <span class="o">=</span> <span class="n">handle</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">closest_picking_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the point on this entity which is closest to the picking ray&quot;&quot;&quot;</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="n">p1</span>  <span class="c1"># normalize?</span>
        <span class="k">return</span> <span class="n">nearest_point_line_line</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine3D.closest_picking_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">closest_picking_point</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the point on this entity which is closest to the picking ray</p>

            <details class="quote">
              <summary>Source code in <code>model/line_3d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">closest_picking_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the point on this entity which is closest to the picking ray&quot;&quot;&quot;</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="n">p1</span>  <span class="c1"># normalize?</span>
    <span class="k">return</span> <span class="n">nearest_point_line_line</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsNormal3D"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.normal_3d.Normal3D">Normal3D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a normal in 3D Space which is used to
store a direction.</p>
<p>This entity isn't currently exposed to the user and gets created
implicitly when needed.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>orientation</code></td>
            <td>
                  <code><span title="Quaternion">Quaternion</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A quaternion which describes the rotation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/normal_3d.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsNormal3D</span><span class="p">(</span><span class="n">Normal3D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a normal in 3D Space which is used to</span>
<span class="sd">    store a direction.</span>

<span class="sd">    This entity isn&#39;t currently exposed to the user and gets created</span>
<span class="sd">    implicitly when needed.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        orientation (Quaternion): A quaternion which describes the rotation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;orientation&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">to_euler</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;orientation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">Euler</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">to_quaternion</span><span class="p">()</span>

    <span class="n">orientation</span><span class="p">:</span> <span class="n">FloatVectorProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Orientation&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Quaternion which describes the orientation of the normal&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;QUATERNION&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">SlvsGenericEntity</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">ui_orientation</span><span class="p">:</span> <span class="n">FloatVectorProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Orientation&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;EULER&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="n">get</span><span class="o">=</span><span class="n">get_orientation</span><span class="p">,</span>
        <span class="nb">set</span><span class="o">=</span><span class="n">set_orientation</span><span class="p">,</span>
        <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;SKIP_SAVE&quot;</span><span class="p">},</span>
        <span class="n">update</span><span class="o">=</span><span class="n">SlvsGenericEntity</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ui_orientation&quot;</span><span class="p">,)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;ui_orientation&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsWorkplane"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.SlvsGenericEntity">SlvsGenericEntity</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a plane which is defined by an origin point
and a normal. Workplanes are used to define the position of 2D entities
which only store the coordinates on the plane.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>p1</code></td>
            <td>
                  <code><span title="SlvsPoint3D">SlvsPoint3D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Origin Point of the Plane</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>nm</code></td>
            <td>
                  <code><span title="SlvsNormal3D">SlvsNormal3D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Normal which defines the orientation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/workplane.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsWorkplane</span><span class="p">(</span><span class="n">SlvsGenericEntity</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a plane which is defined by an origin point</span>
<span class="sd">    and a normal. Workplanes are used to define the position of 2D entities</span>
<span class="sd">    which only store the coordinates on the plane.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        p1 (SlvsPoint3D): Origin Point of the Plane</span>
<span class="sd">        nm (SlvsNormal3D): Normal which defines the orientation</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">size</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">preferences</span><span class="o">.</span><span class="n">get_prefs</span><span class="p">()</span><span class="o">.</span><span class="n">workplane_size</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">p1</span><span class="p">,</span> <span class="n">nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span>

        <span class="n">coords</span> <span class="o">=</span> <span class="n">draw_rect_2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Vector</span><span class="p">(</span><span class="n">co</span><span class="p">))[:]</span> <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>

        <span class="n">indices</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shader</span><span class="p">,</span> <span class="s2">&quot;LINES&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">},</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="c1"># NOTE: probably better to avoid overwriting draw func..</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_visible</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
            <span class="k">return</span>

        <span class="k">with</span> <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">push_pop</span><span class="p">():</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region_data</span><span class="o">.</span><span class="n">view_distance</span>
            <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">multiply_matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">)</span>
            <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">Vector</span><span class="p">((</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">)))</span>

            <span class="n">col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">color</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
            <span class="c1"># Let parent draw outline</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

            <span class="c1"># Additionally draw a face</span>
            <span class="n">col_surface</span> <span class="o">=</span> <span class="n">col</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,)</span>

            <span class="n">shader</span> <span class="o">=</span> <span class="n">Shaders</span><span class="o">.</span><span class="n">uniform_color_3d</span><span class="p">()</span>
            <span class="n">shader</span><span class="o">.</span><span class="n">bind</span><span class="p">()</span>
            <span class="n">gpu</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">blend_set</span><span class="p">(</span><span class="s2">&quot;ALPHA&quot;</span><span class="p">)</span>

            <span class="n">shader</span><span class="o">.</span><span class="n">uniform_float</span><span class="p">(</span><span class="s2">&quot;color&quot;</span><span class="p">,</span> <span class="n">col_surface</span><span class="p">)</span>

            <span class="n">coords</span> <span class="o">=</span> <span class="n">draw_rect_2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">[</span><span class="n">Vector</span><span class="p">(</span><span class="n">co</span><span class="p">)[:]</span> <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
            <span class="n">batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span><span class="n">shader</span><span class="p">,</span> <span class="s2">&quot;TRIS&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">},</span> <span class="n">indices</span><span class="o">=</span><span class="n">indices</span><span class="p">)</span>
            <span class="n">batch</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">shader</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">restore_opengl_defaults</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">push_pop</span><span class="p">():</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region_data</span><span class="o">.</span><span class="n">view_distance</span>
            <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">multiply_matrix</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">)</span>
            <span class="n">gpu</span><span class="o">.</span><span class="n">matrix</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">Vector</span><span class="p">((</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">)))</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_id</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_workplane</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_data</span> <span class="o">=</span> <span class="n">handle</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">matrix_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mat_rot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">orientation</span><span class="o">.</span><span class="n">to_matrix</span><span class="p">()</span><span class="o">.</span><span class="n">to_4x4</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="o">@</span> <span class="n">mat_rot</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">global_data</span><span class="o">.</span><span class="n">Z_AXIS</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">quat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">orientation</span>
        <span class="n">v</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">quat</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">v</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="c1"># Display the normals props as they&#39;re not drawn in the viewport</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">operator</span><span class="p">(</span><span class="n">Operators</span><span class="o">.</span><span class="n">AlignWorkplaneCursor</span><span class="p">)</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slvs_index</span>
        <span class="k">return</span> <span class="n">sub</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsSketch"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.SlvsGenericEntity">SlvsGenericEntity</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>A sketch groups 2 dimensional entities together and is used to later
convert geometry to native blender types.</p>
<p>Entities that belong to a sketch can only be edited as long as the sketch is active.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wp</code></td>
            <td>
                  <code><span title="SlvsWorkplane">SlvsWorkplane</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The base workplane of the sketch</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/sketch.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsSketch</span><span class="p">(</span><span class="n">SlvsGenericEntity</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A sketch groups 2 dimensional entities together and is used to later</span>
<span class="sd">    convert geometry to native blender types.</span>

<span class="sd">    Entities that belong to a sketch can only be edited as long as the sketch is active.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        wp (SlvsWorkplane): The base workplane of the sketch</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">hide_sketch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_type</span> <span class="o">!=</span> <span class="s2">&quot;NONE&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">convert_type</span><span class="p">:</span> <span class="n">EnumProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Convert Type&quot;</span><span class="p">,</span>
        <span class="n">items</span><span class="o">=</span><span class="n">convert_items</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Define how the sketch should be converted in order to be usable in native blender&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">hide_sketch</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">fill_shape</span><span class="p">:</span> <span class="n">BoolProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Fill Shape&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Fill the resulting shape if it&#39;s closed&quot;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">solver_state</span><span class="p">:</span> <span class="n">EnumProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Solver Status&quot;</span><span class="p">,</span> <span class="n">items</span><span class="o">=</span><span class="n">global_data</span><span class="o">.</span><span class="n">solver_state_items</span>
    <span class="p">)</span>
    <span class="n">dof</span><span class="p">:</span> <span class="n">IntProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Degrees of Freedom&quot;</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">target_curve</span><span class="p">:</span> <span class="n">PointerProperty</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Curve</span><span class="p">)</span>
    <span class="n">target_curve_object</span><span class="p">:</span> <span class="n">PointerProperty</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">)</span>
    <span class="n">target_mesh</span><span class="p">:</span> <span class="n">PointerProperty</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Mesh</span><span class="p">)</span>
    <span class="n">target_object</span><span class="p">:</span> <span class="n">PointerProperty</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">bpy</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Object</span><span class="p">)</span>
    <span class="n">curve_resolution</span><span class="p">:</span> <span class="n">IntProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Mesh Curve Resolution&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">soft_max</span><span class="o">=</span><span class="mi">25</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">sketch_entities</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">all</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;sketch&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">sketch</span> <span class="o">!=</span> <span class="bp">self</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">yield</span> <span class="n">e</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">remove_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ob</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">target_object</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">target_curve_object</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ob</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">bpy</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">ob</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_visible</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">active_sketch_i</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">slvs_index</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">visible</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_solver_state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">bpyEnum</span><span class="p">(</span><span class="n">global_data</span><span class="o">.</span><span class="n">solver_state_items</span><span class="p">,</span> <span class="n">identifier</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">solver_state</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">solve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">solve_system</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">sketch</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_sketch</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsPoint2D"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.point_2d.Point2D">Point2D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a point in 2D space.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>co</code></td>
            <td>
                  <code><span title="bpy.props.FloatVectorProperty">FloatVectorProperty</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates of the point on the worpkplane in the form (U, V)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sketch</code></td>
            <td>
                  <code><span title="SlvsSketch">SlvsSketch</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The sketch this entity belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/point_2d.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsPoint2D</span><span class="p">(</span><span class="n">Point2D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a point in 2D space.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        co (FloatVectorProperty): The coordinates of the point on the worpkplane in the form (U, V)</span>
<span class="sd">        sketch (SlvsSketch): The sketch this entity belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">co</span><span class="p">:</span> <span class="n">FloatVectorProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Coordinates&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The coordinates of the point on its sketch&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;XYZ&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;LENGTH&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">SlvsGenericEntity</span><span class="o">.</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span>
        <span class="p">]</span>

    <span class="c1"># def tweak(self, solvesys, pos, group):</span>
    <span class="c1">#     wrkpln = self.sketch.wp</span>
    <span class="c1">#     u, v, _ = wrkpln.matrix_basis.inverted() @ pos</span>

    <span class="c1">#     self.create_slvs_data(solvesys, group=group)</span>

    <span class="c1">#     p = solvesys.add_point_2d(group, u, v, wrkpln.py_data)</span>
    <span class="c1">#     make_coincident(solvesys, p, self, wrkpln.py_data, group, entity_type=SlvsPoint2D)</span>
    <span class="c1">#     solvesys.dragged(group, p, wrkpln.py_data)</span>
    <span class="c1">#     return</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;co&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsLine2D"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.Entity2D">Entity2D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a line in 2D space. Connects p1 and p2 and lies on the
sketche's workplane.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>p1</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line's startpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>p2</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Line's endpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sketch</code></td>
            <td>
                  <code><span title="SlvsSketch">SlvsSketch</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The sketch this entity belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/line_2d.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsLine2D</span><span class="p">(</span><span class="n">Entity2D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a line in 2D space. Connects p1 and p2 and lies on the</span>
<span class="sd">    sketche&#39;s workplane.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        p1 (SlvsPoint2D): Line&#39;s startpoint</span>
<span class="sd">        p2 (SlvsPoint2D): Line&#39;s endpoint</span>
<span class="sd">        sketch (SlvsSketch): The sketch this entity belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_line</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_segment</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_dashed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shader</span><span class="p">,</span> <span class="s2">&quot;LINES&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_line_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_data</span> <span class="o">=</span> <span class="n">handle</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">closest_picking_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the point on this entity which is closest to the picking ray&quot;&quot;&quot;</span>
        <span class="c1"># NOTE: for 2d entities it could be enough precise to simply take the intersection point with the workplane</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="n">p1</span>  <span class="c1"># normalize?</span>
        <span class="k">return</span> <span class="n">nearest_point_line_line</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">project_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Projects a point onto the line&quot;&quot;&quot;</span>
        <span class="n">dir_vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>

        <span class="n">local_co</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">-</span> <span class="n">p1</span>
        <span class="k">return</span> <span class="n">local_co</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">dir_vec</span><span class="p">)</span> <span class="o">+</span> <span class="n">p1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">connection_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">direction</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">points</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">points</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the direction of the line, true if inverted&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_endpoint</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the angle at the connection point between the two entities</span>
<span class="sd">        or None if they&#39;re not connected or not in 2d space.</span>

<span class="sd">        `kwargs` key values are propagated to other `get_connection_point` functions</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_3d</span><span class="p">()</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">e</span><span class="o">.</span><span class="n">is_line</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)]):</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="n">point</span> <span class="o">=</span> <span class="n">get_connection_point</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">other</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">point</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">dir1</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">dir2</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
            <span class="k">else</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">dir1</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">dir2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_bezier</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">spline</span><span class="p">,</span> <span class="n">startpoint</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">invert_direction</span><span class="p">,</span> <span class="n">set_startpoint</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
        <span class="n">locations</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">to_3d</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">to_3d</span><span class="p">()]</span>
        <span class="k">if</span> <span class="n">invert_direction</span><span class="p">:</span>
            <span class="n">locations</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">set_startpoint</span><span class="p">:</span>
            <span class="n">startpoint</span><span class="o">.</span><span class="n">co</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endpoint</span><span class="o">.</span><span class="n">co</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">startpoint</span><span class="o">.</span><span class="n">handle_right</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endpoint</span><span class="o">.</span><span class="n">handle_left</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">endpoint</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">midpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the orientation of the line in 3d space&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">direction_vec</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">)</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns vector perpendicular to line, position is ignored&quot;&quot;&quot;</span>
        <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
        <span class="n">nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
        <span class="n">nm</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">mat_rot</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">nm</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">overlaps_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">co</span><span class="p">):</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">co_rounded</span> <span class="o">=</span> <span class="n">round_v</span><span class="p">(</span><span class="n">co</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">precision</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">co_rounded</span> <span class="o">==</span> <span class="n">round_v</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">precision</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">intersect</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">:</span> <span class="n">SlvsGenericEntity</span><span class="p">,</span> <span class="n">extended</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Vector</span><span class="p">]:</span>
        <span class="c1"># NOTE: There can be multiple intersections when intersecting with one or more curves</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">parse_retval</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">()</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">value</span><span class="p">,)</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">extended</span><span class="p">:</span>
                <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">wp</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="n">intersect_line_line</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">parse_retval</span><span class="p">((</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">])[:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">parse_retval</span><span class="p">(</span>
                <span class="n">intersect_line_line_2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">use_self</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># Replace entity by a similar entity with the connection points p1, and p2</span>
        <span class="c1"># This is used for trimming, points are expected to lie somewhere on the existing entity</span>
        <span class="k">if</span> <span class="n">use_self</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">sse</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span>
        <span class="n">sketch</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">active_sketch</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">sse</span><span class="o">.</span><span class="n">add_line_2d</span><span class="p">(</span>
            <span class="n">p1</span><span class="p">,</span>
            <span class="n">p2</span><span class="p">,</span>
            <span class="n">sketch</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">construction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">distance_along_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span>
        <span class="n">len_1</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span> <span class="o">-</span> <span class="n">end</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>
        <span class="n">len_2</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>

        <span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.0000001</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="p">(</span><span class="n">len_1</span> <span class="o">+</span> <span class="n">len_2</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">+</span> <span class="n">threshold</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ptr</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">old</span> <span class="o">!=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ptr</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_offset_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">normal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">normal</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">direction</span><span class="p">:</span>
            <span class="n">normal</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="n">offset_vec</span> <span class="o">=</span> <span class="n">normal</span> <span class="o">*</span> <span class="n">offset</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span> <span class="o">+</span> <span class="n">offset_vec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">+</span> <span class="n">offset_vec</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlvsGenericEntity</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;sketch&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;construction&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">add_line_2d</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.closest_picking_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">closest_picking_point</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the point on this entity which is closest to the picking ray</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">closest_picking_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the point on this entity which is closest to the picking ray&quot;&quot;&quot;</span>
    <span class="c1"># NOTE: for 2d entities it could be enough precise to simply take the intersection point with the workplane</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span>
    <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="n">p1</span>  <span class="c1"># normalize?</span>
    <span class="k">return</span> <span class="n">nearest_point_line_line</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">origin</span><span class="p">,</span> <span class="n">view_vector</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.connection_angle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connection_angle</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the angle at the connection point between the two entities
or None if they're not connected or not in 2d space.</p>
<p><code>kwargs</code> key values are propagated to other <code>get_connection_point</code> functions</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the angle at the connection point between the two entities</span>
<span class="sd">    or None if they&#39;re not connected or not in 2d space.</span>

<span class="sd">    `kwargs` key values are propagated to other `get_connection_point` functions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_3d</span><span class="p">()</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">e</span><span class="o">.</span><span class="n">is_line</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)]):</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="n">point</span> <span class="o">=</span> <span class="n">get_connection_point</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">other</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">point</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">dir1</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="n">dir2</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">other</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
        <span class="k">else</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">dir1</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">dir2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.direction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the direction of the line, true if inverted</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the direction of the line, true if inverted&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_endpoint</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.normal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">normal</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns vector perpendicular to line, position is ignored</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns vector perpendicular to line, position is ignored&quot;&quot;&quot;</span>
    <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
    <span class="n">nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
    <span class="n">nm</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">mat_rot</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">nm</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.orientation" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">orientation</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Return the orientation of the line in 3d space</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">orientation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the orientation of the line in 3d space&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsLine2D.project_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">project_point</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Projects a point onto the line</p>

            <details class="quote">
              <summary>Source code in <code>model/line_2d.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Projects a point onto the line&quot;&quot;&quot;</span>
    <span class="n">dir_vec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
    <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>

    <span class="n">local_co</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">-</span> <span class="n">p1</span>
    <span class="k">return</span> <span class="n">local_co</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">dir_vec</span><span class="p">)</span> <span class="o">+</span> <span class="n">p1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsArc"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.Entity2D">Entity2D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of an arc in 2D space around the centerpoint ct. Connects
p2 to p3 or (vice-versa if the option invert_direction is true) with a
circle segment that is resolution independent. The arc lies on the sketche's workplane.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>p1</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arc's centerpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>p2</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arc's startpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>p2</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Arc's endpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>nm</code></td>
            <td>
                  <code><span title="SlvsNormal3D">SlvsNormal3D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Orientation</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sketch</code></td>
            <td>
                  <code><span title="SlvsSketch">SlvsSketch</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The sketch this entity belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/arc.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsArc</span><span class="p">(</span><span class="n">Entity2D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of an arc in 2D space around the centerpoint ct. Connects</span>
<span class="sd">    p2 to p3 or (vice-versa if the option invert_direction is true) with a</span>
<span class="sd">    circle segment that is resolution independent. The arc lies on the sketche&#39;s workplane.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        p1 (SlvsPoint2D): Arc&#39;s centerpoint</span>
<span class="sd">        p2 (SlvsPoint2D): Arc&#39;s startpoint</span>
<span class="sd">        p2 (SlvsPoint2D): Arc&#39;s endpoint</span>
<span class="sd">        nm (SlvsNormal3D): Orientation</span>
<span class="sd">        sketch (SlvsSketch): The sketch this entity belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">invert_direction</span><span class="p">:</span> <span class="n">BoolProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Invert direction&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Connect the points in the inverted order&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_curve</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_segment</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert_direction</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert_direction</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_dashed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span>

        <span class="n">radius</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">length</span>

        <span class="n">coords</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">radius</span> <span class="ow">and</span> <span class="n">p2</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">p1</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">Vector</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">p1</span><span class="p">))</span>

            <span class="c1"># TODO: resolution should depend on segment length?!</span>
            <span class="n">segments</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">CURVE_RESOLUTION</span> <span class="o">*</span> <span class="p">(</span><span class="n">angle</span> <span class="o">/</span> <span class="n">FULL_TURN</span><span class="p">))</span>

            <span class="n">coords</span> <span class="o">=</span> <span class="n">coords_arc_2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">segments</span><span class="p">,</span> <span class="n">angle</span><span class="o">=</span><span class="n">angle</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>

            <span class="n">mat_local</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="o">.</span><span class="n">to_3d</span><span class="p">())</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">mat_local</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">mat</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="o">*</span><span class="n">co</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))[:]</span> <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shader</span><span class="p">,</span> <span class="s2">&quot;LINE_STRIP&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_data</span> <span class="o">=</span> <span class="n">handle</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns an angle in radians from zero to 2*PI&quot;&quot;&quot;</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">center</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">center</span>
        <span class="k">return</span> <span class="n">_get_angle</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">start_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">center</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">((</span><span class="n">start</span> <span class="o">-</span> <span class="n">center</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="p">(</span><span class="n">start</span> <span class="o">-</span> <span class="n">center</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Vector</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the normal vector at a given position&quot;&quot;&quot;</span>

        <span class="n">normal</span> <span class="o">=</span> <span class="n">position</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="k">return</span> <span class="n">normal</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span> <span class="o">+</span> <span class="n">pol2cart</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">coords</span><span class="o">.</span><span class="n">to_3d</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">connection_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">direction</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="n">points</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">points</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the direction of the arc, true if inverted&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">is_endpoint</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
        <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_direction</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">center</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bezier_segment_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">max_angle</span> <span class="o">=</span> <span class="n">QUARTER_TURN</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">/</span> <span class="n">max_angle</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bezier_point_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bezier_segment_count</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">point_on_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">start_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_angle</span> <span class="k">if</span> <span class="n">relative</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">pol2cart</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">start_angle</span> <span class="o">+</span> <span class="n">angle</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">project_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Projects a point onto the arc&quot;&quot;&quot;</span>
        <span class="n">local_co</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">local_co</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">local_co</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_on_curve</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">connection_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the angle at the connection point between the two entities</span>
<span class="sd">        or None if they&#39;re either not connected or not in 2d space</span>

<span class="sd">        You may use `connection_point` in order to remove ambiguity in case</span>
<span class="sd">        multiple intersections point exist with other entity.</span>

<span class="sd">        `kwargs` key values are propagated to other `get_connection_point` functions</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">point</span> <span class="o">=</span> <span class="n">connection_point</span> <span class="ow">or</span> <span class="n">get_connection_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">point</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_3d</span><span class="p">()</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">_get_tangent</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
            <span class="n">local_co</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">arc</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
            <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">local_co</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">local_co</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
            <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
            <span class="n">tangent</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">tangent</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">mat_rot</span><span class="p">)</span>
            <span class="n">invert</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invert</span><span class="p">:</span>
                <span class="n">tangent</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">return</span> <span class="n">tangent</span>

        <span class="c1"># Get directions</span>
        <span class="n">directions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
                <span class="n">directions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_get_tangent</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">point</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">directions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">entity</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
                    <span class="k">else</span> <span class="n">entity</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="n">dir1</span><span class="p">,</span> <span class="n">dir2</span> <span class="o">=</span> <span class="n">directions</span>
        <span class="k">return</span> <span class="n">dir1</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">dir2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_bezier</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spline</span><span class="p">,</span>
        <span class="n">startpoint</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">invert_direction</span><span class="p">,</span>
        <span class="n">set_startpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">midpoints</span><span class="o">=</span><span class="p">[],</span>
    <span class="p">):</span>
        <span class="c1"># Get midpoint positions</span>
        <span class="n">segment_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">midpoints</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">curve_angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle</span>
        <span class="n">radius</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span>

        <span class="n">midpoint_positions</span> <span class="o">=</span> <span class="n">get_bezier_curve_midpoint_positions</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">segment_count</span><span class="p">,</span> <span class="n">midpoints</span><span class="p">,</span> <span class="n">curve_angle</span>
        <span class="p">)</span>

        <span class="n">angle</span> <span class="o">=</span> <span class="n">curve_angle</span> <span class="o">/</span> <span class="n">segment_count</span>

        <span class="n">locations</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="o">*</span><span class="n">midpoint_positions</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">co</span><span class="p">]</span>
        <span class="n">bezier_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">startpoint</span><span class="p">,</span> <span class="o">*</span><span class="n">midpoints</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">invert_direction</span><span class="p">:</span>
            <span class="n">locations</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">set_startpoint</span><span class="p">:</span>
            <span class="n">startpoint</span><span class="o">.</span><span class="n">co</span> <span class="o">=</span> <span class="n">locations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">to_3d</span><span class="p">()</span>

        <span class="n">n</span> <span class="o">=</span> <span class="n">FULL_TURN</span> <span class="o">/</span> <span class="n">angle</span> <span class="k">if</span> <span class="n">angle</span> <span class="o">!=</span> <span class="mf">0.0</span> <span class="k">else</span> <span class="mi">0</span>
        <span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">HALF_TURN</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">base_offset</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="n">radius</span><span class="p">,</span> <span class="n">q</span> <span class="o">*</span> <span class="n">radius</span><span class="p">))</span>

        <span class="n">create_bezier_curve</span><span class="p">(</span>
            <span class="n">segment_count</span><span class="p">,</span>
            <span class="n">bezier_points</span><span class="p">,</span>
            <span class="n">locations</span><span class="p">,</span>
            <span class="n">center</span><span class="p">,</span>
            <span class="n">base_offset</span><span class="p">,</span>
            <span class="n">invert</span><span class="o">=</span><span class="n">invert_direction</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">endpoint</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>
        <span class="n">sub</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;invert_direction&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">sub</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_inside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
        <span class="c1"># Checks if a position is inside the arcs angle range</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">p1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">p2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span>

        <span class="n">x_axis</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="c1"># angle_signed interprets clockwise as positive, so invert..</span>
        <span class="n">a1</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">p1</span><span class="p">))</span>
        <span class="n">a2</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>

        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">length</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">p1</span><span class="o">.</span><span class="n">length</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">p2</span><span class="o">.</span><span class="n">length</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">a1</span> <span class="o">&lt;</span> <span class="n">angle</span> <span class="o">&gt;</span> <span class="n">a2</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">overlaps_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">co</span><span class="p">):</span>
        <span class="n">precision</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">co_rounded</span> <span class="o">=</span> <span class="n">round_v</span><span class="p">(</span><span class="n">co</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">precision</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">co_rounded</span> <span class="o">==</span> <span class="n">round_v</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">ndigits</span><span class="o">=</span><span class="n">precision</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">parse_retval</span><span class="p">(</span><span class="n">retval</span><span class="p">):</span>
            <span class="c1"># Intersect might return None, (value, value) or (value, None)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="s2">&quot;__len__&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">retval</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_inside</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">other</span><span class="o">.</span><span class="n">is_inside</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                        <span class="k">continue</span>

                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">retval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">retval</span><span class="p">)</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">retval</span><span class="p">):</span>
                    <span class="k">return</span> <span class="p">()</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">retval</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">parse_retval</span><span class="p">(</span>
                <span class="n">intersect_line_sphere_2d</span><span class="p">(</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">other</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">parse_retval</span><span class="p">(</span>
                <span class="n">intersect_sphere_sphere_2d</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">radius</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">distance_along_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">points</span> <span class="o">=</span> <span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert_direction</span> <span class="k">else</span> <span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">)</span>

        <span class="n">len_1</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">end</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ct</span><span class="p">))</span>
        <span class="n">len_2</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">((</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">ct</span><span class="p">)</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">start</span><span class="p">))</span>

        <span class="n">threshold</span> <span class="o">=</span> <span class="mf">0.000001</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="p">(</span><span class="n">len_1</span> <span class="o">+</span> <span class="n">len_2</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">angle</span> <span class="o">+</span> <span class="n">threshold</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">use_self</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">use_self</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">sketch</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">active_sketch</span>
        <span class="n">arc</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
            <span class="n">sketch</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">sketch</span>
        <span class="p">)</span>
        <span class="n">arc</span><span class="o">.</span><span class="n">construction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>
        <span class="n">arc</span><span class="o">.</span><span class="n">invert_direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert_direction</span>
        <span class="k">return</span> <span class="n">arc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old</span><span class="p">,</span> <span class="n">new</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">ptr</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ct&quot;</span><span class="p">,</span> <span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">old</span> <span class="o">!=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ptr</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">new</span><span class="p">)</span>
            <span class="k">break</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlvsGenericEntity</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;p1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p1</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;p2&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">p2</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;sketch&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;nm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;ct&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;invert&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">invert_direction</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;construction&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h2 id="CAD_Sketcher.model.types.SlvsArc.angle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">angle</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

      <p>Returns an angle in radians from zero to 2*PI</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsArc.connection_angle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">connection_angle</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">connection_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the angle at the connection point between the two entities
or None if they're either not connected or not in 2d space</p>
<p>You may use <code>connection_point</code> in order to remove ambiguity in case
multiple intersections point exist with other entity.</p>
<p><code>kwargs</code> key values are propagated to other <code>get_connection_point</code> functions</p>

            <details class="quote">
              <summary>Source code in <code>model/arc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">connection_angle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">connection_point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the angle at the connection point between the two entities</span>
<span class="sd">    or None if they&#39;re either not connected or not in 2d space</span>

<span class="sd">    You may use `connection_point` in order to remove ambiguity in case</span>
<span class="sd">    multiple intersections point exist with other entity.</span>

<span class="sd">    `kwargs` key values are propagated to other `get_connection_point` functions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">point</span> <span class="o">=</span> <span class="n">connection_point</span> <span class="ow">or</span> <span class="n">get_connection_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">point</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_3d</span><span class="p">()</span> <span class="ow">or</span> <span class="n">other</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_tangent</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="n">point</span><span class="p">):</span>
        <span class="n">local_co</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">arc</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">local_co</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">local_co</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
        <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
        <span class="n">tangent</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">tangent</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">mat_rot</span><span class="p">)</span>
        <span class="n">invert</span> <span class="o">=</span> <span class="n">arc</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">invert</span><span class="p">:</span>
            <span class="n">tangent</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">tangent</span>

    <span class="c1"># Get directions</span>
    <span class="n">directions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
            <span class="n">directions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_get_tangent</span><span class="p">(</span><span class="n">entity</span><span class="p">,</span> <span class="n">point</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">directions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">entity</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">entity</span><span class="o">.</span><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
                <span class="k">else</span> <span class="n">entity</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">)</span>

    <span class="n">dir1</span><span class="p">,</span> <span class="n">dir2</span> <span class="o">=</span> <span class="n">directions</span>
    <span class="k">return</span> <span class="n">dir1</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">dir2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsArc.direction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">direction</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns the direction of the arc, true if inverted</p>

            <details class="quote">
              <summary>Source code in <code>model/arc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the direction of the arc, true if inverted&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_endpoint</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
    <span class="k">return</span> <span class="n">point</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsArc.normal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">normal</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Return the normal vector at a given position</p>

            <details class="quote">
              <summary>Source code in <code>model/arc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">normal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Vector</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the normal vector at a given position&quot;&quot;&quot;</span>

    <span class="n">normal</span> <span class="o">=</span> <span class="n">position</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
    <span class="k">return</span> <span class="n">normal</span><span class="o">.</span><span class="n">normalized</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsArc.project_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">project_point</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Projects a point onto the arc</p>

            <details class="quote">
              <summary>Source code in <code>model/arc.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">project_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Projects a point onto the arc&quot;&quot;&quot;</span>
    <span class="n">local_co</span> <span class="o">=</span> <span class="n">coords</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">local_co</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">local_co</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_on_curve</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">relative</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsCircle"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_entity.Entity2D">Entity2D</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Representation of a circle in 2D space. The circle is centered at ct with
its size defined by the radius and is resoulution independent.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ct</code></td>
            <td>
                  <code><span title="SlvsPoint2D">SlvsPoint2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Circle's centerpoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>radius</code></td>
            <td>
                  <code><span title="bpy.props.FloatProperty">FloatProperty</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The radius of the circle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>nm</code></td>
            <td>
                  <code><span title="SlvsNormal2D">SlvsNormal2D</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sketch</code></td>
            <td>
                  <code><span title="SlvsSketch">SlvsSketch</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The sketch this entity belongs to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>model/circle.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsCircle</span><span class="p">(</span><span class="n">Entity2D</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Representation of a circle in 2D space. The circle is centered at ct with</span>
<span class="sd">    its size defined by the radius and is resoulution independent.</span>

<span class="sd">    Arguments:</span>
<span class="sd">        ct (SlvsPoint2D): Circle&#39;s centerpoint</span>
<span class="sd">        radius (FloatProperty): The radius of the circle</span>
<span class="sd">        nm (SlvsNormal2D):</span>
<span class="sd">        sketch (SlvsSketch): The sketch this entity belongs to</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">radius</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Radius&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The radius of the circle&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;DISTANCE&quot;</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;LENGTH&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">tag_update</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_path</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_curve</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_segment</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">dependencies</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">SlvsGenericEntity</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_dashed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">bpy</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">background</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="n">coords</span> <span class="o">=</span> <span class="n">coords_arc_2d</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">CURVE_RESOLUTION</span><span class="p">)</span>

        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>

        <span class="n">mat_local</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="n">Vector</span><span class="p">((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">mat_local</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="p">[(</span><span class="n">mat</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="o">*</span><span class="n">co</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))[:]</span> <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pos&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_batch</span> <span class="o">=</span> <span class="n">batch_for_shader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_shader</span><span class="p">,</span> <span class="s2">&quot;LINE_STRIP&quot;</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_dirty</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">param_distance</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_distance</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>

        <span class="n">nm</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">nm</span>

        <span class="n">handle</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">nm</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">param_distance</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">py_data</span> <span class="o">=</span> <span class="n">handle</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_from_slvs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">get_param_value</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">param_distance</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">point_on_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">pol2cart</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">angle</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placement</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_on_curve</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span><span class="o">.</span><span class="n">to_3d</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">is_closed</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">connection_points</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># NOTE: it should probably be possible to lookup coincident points on circle</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">direction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">is_endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bezier_segment_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="mi">4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">bezier_point_count</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bezier_segment_count</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_bezier</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spline</span><span class="p">,</span>
        <span class="n">startpoint</span><span class="p">,</span>
        <span class="n">endpoint</span><span class="p">,</span>
        <span class="n">invert_direction</span><span class="p">,</span>
        <span class="n">set_startpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">midpoints</span><span class="o">=</span><span class="p">[],</span>
    <span class="p">):</span>
        <span class="c1"># Get midpoint positions</span>
        <span class="n">segment_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">midpoints</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">radius</span><span class="p">,</span> <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>

        <span class="n">bezier_points</span> <span class="o">=</span> <span class="p">[</span><span class="n">startpoint</span><span class="p">,</span> <span class="o">*</span><span class="n">midpoints</span><span class="p">]</span>

        <span class="n">locations</span> <span class="o">=</span> <span class="n">get_bezier_curve_midpoint_positions</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span> <span class="n">segment_count</span><span class="p">,</span> <span class="n">bezier_points</span><span class="p">,</span> <span class="n">FULL_TURN</span><span class="p">,</span> <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">FULL_TURN</span> <span class="o">/</span> <span class="n">segment_count</span>

        <span class="n">n</span> <span class="o">=</span> <span class="n">FULL_TURN</span> <span class="o">/</span> <span class="n">angle</span>
        <span class="n">q</span> <span class="o">=</span> <span class="p">(</span><span class="mi">4</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">HALF_TURN</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">n</span><span class="p">))</span>
        <span class="n">base_offset</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="n">radius</span><span class="p">,</span> <span class="n">q</span> <span class="o">*</span> <span class="n">radius</span><span class="p">))</span>

        <span class="n">create_bezier_curve</span><span class="p">(</span>
            <span class="n">segment_count</span><span class="p">,</span>
            <span class="n">bezier_points</span><span class="p">,</span>
            <span class="n">locations</span><span class="p">,</span>
            <span class="n">center</span><span class="p">,</span>
            <span class="n">base_offset</span><span class="p">,</span>
            <span class="n">invert</span><span class="o">=</span><span class="n">invert_direction</span><span class="p">,</span>
            <span class="n">cyclic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">endpoint</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">overlaps_endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">co</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">def</span><span class="w"> </span><span class="nf">parse_retval</span><span class="p">(</span><span class="n">retval</span><span class="p">):</span>
            <span class="c1"># Intersect might return None, (value, value) or (value, None)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">retval</span><span class="p">,</span> <span class="s2">&quot;__len__&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">retval</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
                        <span class="k">continue</span>
                    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">retval</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">overlaps_endpoint</span><span class="p">(</span><span class="n">retval</span><span class="p">):</span>
                    <span class="k">return</span> <span class="p">()</span>
                <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">retval</span><span class="p">)</span>

            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">other</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">parse_retval</span><span class="p">(</span>
                <span class="n">intersect_line_sphere_2d</span><span class="p">(</span>
                    <span class="n">other</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">SlvsCircle</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">parse_retval</span><span class="p">(</span>
                <span class="n">intersect_sphere_sphere_2d</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">radius</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="n">intersect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">use_self</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">use_self</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">p2</span> <span class="o">=</span> <span class="n">p2</span>
            <span class="k">return</span> <span class="bp">self</span>

        <span class="n">sketch</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">active_sketch</span>
        <span class="n">arc</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">add_arc</span><span class="p">(</span>
            <span class="n">sketch</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">sketch</span>
        <span class="p">)</span>
        <span class="n">arc</span><span class="o">.</span><span class="n">construction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span>
        <span class="k">return</span> <span class="n">arc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">distance_along_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">start</span><span class="p">,</span> <span class="n">end</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">-</span> <span class="n">ct</span><span class="p">,</span> <span class="n">p2</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">*</span><span class="n">end</span><span class="o">.</span><span class="n">yx</span><span class="p">)</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="o">*</span><span class="n">start</span><span class="o">.</span><span class="n">yx</span><span class="p">))</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">angle</span>
        <span class="k">return</span> <span class="n">retval</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">new</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">SlvsGenericEntity</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;ct&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ct</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;nm&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;radius&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;sketch&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;construction&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">construction</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">sketcher</span><span class="o">.</span><span class="n">entities</span><span class="o">.</span><span class="n">add_circle</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>