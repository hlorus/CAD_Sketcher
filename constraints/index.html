
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../entities/">
      
      
        <link rel="next" href="../solver/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Constraints - CAD Sketcher</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#active" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CAD Sketcher" class="md-header__button md-logo" aria-label="CAD Sketcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CAD Sketcher
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Constraints
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CAD Sketcher" class="md-nav__button md-logo" aria-label="CAD Sketcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CAD Sketcher
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../user_interface/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User interface
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../entities/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Entities
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Constraints
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Constraints
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active" class="md-nav__link">
    <span class="md-ellipsis">
      Active
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure" class="md-nav__link">
    <span class="md-ellipsis">
      Failure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geometric-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Geometric Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsCoincident" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsCoincident
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsVertical" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsVertical
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsHorizontal" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsHorizontal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsParallel" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsParallel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPerpendicular" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPerpendicular
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsEqual" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsEqual
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsTangent" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsTangent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsMidpoint" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsMidpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsRatio" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsRatio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SlvsRatio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dimensional-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Dimensional Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsDistance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.is_align" class="md-nav__link">
    <span class="md-ellipsis">
      is_align
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.use_align" class="md-nav__link">
    <span class="md-ellipsis">
      use_align
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDiameter" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsDiameter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDiameter.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsAngle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle.init_props" class="md-nav__link">
    <span class="md-ellipsis">
      init_props
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../solver/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Solver
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Integration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../interaction_system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Interaction system
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../code_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Documentation
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#active" class="md-nav__link">
    <span class="md-ellipsis">
      Active
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#failure" class="md-nav__link">
    <span class="md-ellipsis">
      Failure
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geometric-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Geometric Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsCoincident" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsCoincident
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsVertical" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsVertical
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsHorizontal" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsHorizontal
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsParallel" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsParallel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsPerpendicular" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsPerpendicular
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsEqual" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsEqual
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsTangent" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsTangent
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsMidpoint" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsMidpoint
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsRatio" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsRatio
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SlvsRatio">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dimensional-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Dimensional Constraints
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsDistance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.is_align" class="md-nav__link">
    <span class="md-ellipsis">
      is_align
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.use_align" class="md-nav__link">
    <span class="md-ellipsis">
      use_align
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDistance.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDiameter" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsDiameter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsDiameter.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle" class="md-nav__link">
    <span class="md-ellipsis">
      SlvsAngle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle.init_props" class="md-nav__link">
    <span class="md-ellipsis">
      init_props
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#CAD_Sketcher.model.types.SlvsAngle.value_placement" class="md-nav__link">
    <span class="md-ellipsis">
      value_placement
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



  <h1>Constraints</h1>

<p>Constraints are used to restrict the movement of entities and define their
final locations. A constraint can usually be created between different entity types,
check the corresponding operator's tooltip to find out what's supported.</p>
<h2 id="active">Active</h2>
<p>A constraint is considered to be active when the sketch it belongs to is set as the active
sketch or, for constraints that don't belong to a sketch, when no sketch is active.</p>
<h2 id="failure">Failure</h2>
<p>Whenever the <a href="../solver/">solver</a> fails to find a solution for the given system it
will try to mark constraints that are causing the failure. Those constraints
will be colored red, additionally the failed sketch will be marked.</p>
<h2 id="types">Types</h2>
<blockquote>
<p>Constraint types follow the implementation of
<a href="https://solvespace.readthedocs.io/en/latest/constraints/index.html">solvespace</a>.</p>
</blockquote>
<h3 id="geometric-constraints">Geometric Constraints</h3>


<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsCoincident"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces two points to be coincident,
or a point to lie on a curve, or a point to lie on a plane.</p>
<p>The point-coincident constraint is available in both 3d and projected versions.
The 3d point-coincident constraint restricts three degrees of freedom;
the projected version restricts only two. If two points are drawn in a workplane,
and then constrained coincident in 3d, then an error will result–they are already
coincident in one dimension (the dimension normal to the plane),
so the third constraint equation is redundant.</p>

              <details class="quote">
                <summary>Source code in <code>model/coincident.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsCoincident</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces two points to be coincident,</span>
<span class="sd">    or a point to lie on a curve, or a point to lie on a plane.</span>

<span class="sd">    The point-coincident constraint is available in both 3d and projected versions.</span>
<span class="sd">    The 3d point-coincident constraint restricts three degrees of freedom;</span>
<span class="sd">    the projected version restricts only two. If two points are drawn in a workplane,</span>
<span class="sd">    and then constrained coincident in 3d, then an error will result–they are already</span>
<span class="sd">    coincident in one dimension (the dimension normal to the plane),</span>
<span class="sd">    so the third constraint equation is redundant.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;COINCIDENT&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Coincident&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">POINT</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">POINT</span><span class="p">,</span> <span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">,</span> <span class="n">SlvsCircle</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">))</span>
    <span class="c1"># NOTE: Coincident between 3dPoint and Workplane currently doesn&#39;t seem to work</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">FREE</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">OPTIONAL</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">make_coincident</span><span class="p">(</span>
            <span class="n">solvesys</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">(),</span> <span class="n">group</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsVertical"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces a line segment to be vertical. It applies in 2D Space only because
the meaning of horizontal or vertical is defined by the workplane.</p>

              <details class="quote">
                <summary>Source code in <code>model/vertical.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsVertical</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces a line segment to be vertical. It applies in 2D Space only because</span>
<span class="sd">    the meaning of horizontal or vertical is defined by the workplane.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;VERTICAL&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Vertical&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="n">SlvsLine2D</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">),</span> <span class="p">(</span><span class="n">SlvsPoint2D</span><span class="p">,))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># return None if first entity is line</span>
            <span class="k">if</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_point</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;entityB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsHorizontal"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces a line segment to be horizontal. It applies in 2D Space only because
the meaning of horizontal or vertical is defined by the workplane.</p>

              <details class="quote">
                <summary>Source code in <code>model/horizontal.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsHorizontal</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces a line segment to be horizontal. It applies in 2D Space only because</span>
<span class="sd">    the meaning of horizontal or vertical is defined by the workplane.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;HORIZONTAL&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Horizontal&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="n">SlvsLine2D</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">),</span> <span class="p">(</span><span class="n">SlvsPoint2D</span><span class="p">,))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># return None if first entity is line</span>
            <span class="k">if</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_point</span><span class="p">():</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;entityB&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><blockquote>
<p><strong>Note:</strong> It’s good to use horizontal and vertical constraints whenever possible. These constraints are very simple to solve, and will not lead to convergence problems. Whenever possible, define the workplanes so that lines are horizontal and vertical within those workplanes.</p>
</blockquote>


<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsParallel"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces two lines to be parallel. Applies only in 2D.</p>

              <details class="quote">
                <summary>Source code in <code>model/parallel.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsParallel</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces two lines to be parallel. Applies only in 2D.&quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;PARALLEL&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Parallel&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="n">SlvsLine2D</span><span class="p">,),</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">wp</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;workplane&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">parallel</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsPerpendicular"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces two lines to be perpendicular, applies only in 2D. This constraint
is equivalent to an angle constraint for ninety degrees.</p>

              <details class="quote">
                <summary>Source code in <code>model/perpendicular.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsPerpendicular</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces two lines to be perpendicular, applies only in 2D. This constraint</span>
<span class="sd">    is equivalent to an angle constraint for ninety degrees.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;PERPENDICULAR&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Perpendicular&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="n">SlvsLine2D</span><span class="p">,),</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">wp</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;workplane&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">get_connection_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">point</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">point</span><span class="p">,)</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsEqual"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces two lengths, or radiuses to be equal.</p>
<p>If a line and an arc of a circle are selected, then the length of the line is
forced equal to the length (not the radius) of the arc.</p>

              <details class="quote">
                <summary>Source code in <code>model/equal.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsEqual</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces two lengths, or radiuses to be equal.</span>

<span class="sd">    If a line and an arc of a circle are selected, then the length of the line is</span>
<span class="sd">    forced equal to the length (not the radius) of the arc.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;EQUAL&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Equal&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">line_arc_circle</span><span class="p">,</span> <span class="n">line_arc_circle</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="n">SlvsCircle</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">CURVE</span>
            <span class="k">return</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">),)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>

        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">wp</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;workplane&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">equal</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsTangent"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces two curves (arc/circle) or a curve and a line to be tangent.</p>

              <details class="quote">
                <summary>Source code in <code>model/tangent.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsTangent</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces two curves (arc/circle) or a curve and a line to be tangent.&quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;TANGENT&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Tangent&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">CURVE</span><span class="p">,</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,</span> <span class="o">*</span><span class="n">CURVE</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>

        <span class="n">CIRCLE_ARC</span> <span class="o">=</span> <span class="p">(</span><span class="n">SlvsCircle</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CIRCLE_ARC</span> <span class="ow">and</span> <span class="n">e2</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="n">orig</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">orig</span><span class="p">)</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">orig</span><span class="p">)</span> <span class="o">+</span> <span class="n">orig</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_point_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_line_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">(</span>
                <span class="n">make_coincident</span><span class="p">(</span><span class="n">solvesys</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">group</span><span class="p">),</span>
                <span class="n">make_coincident</span><span class="p">(</span><span class="n">solvesys</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">group</span><span class="p">),</span>
                <span class="n">solvesys</span><span class="o">.</span><span class="n">perpendicular</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">workplane</span><span class="o">=</span><span class="n">wp</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CIRCLE_ARC</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CIRCLE_ARC</span><span class="p">:</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span> <span class="o">+</span> <span class="n">e2</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_point_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>
            <span class="n">line</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_line_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="n">make_coincident</span><span class="p">(</span><span class="n">solvesys</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e1</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">group</span><span class="p">),</span>
                <span class="n">make_coincident</span><span class="p">(</span><span class="n">solvesys</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">group</span><span class="p">),</span>
                <span class="n">solvesys</span><span class="o">.</span><span class="n">coincident</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">tangent</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">point</span> <span class="o">=</span> <span class="n">get_connection_point</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">point</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">point</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsMidpoint"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.GenericConstraint">GenericConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Forces a point to lie on the midpoint of a line.</p>

              <details class="quote">
                <summary>Source code in <code>model/midpoint.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsMidpoint</span><span class="p">(</span><span class="n">GenericConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forces a point to lie on the midpoint of a line.&quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;MIDPOINT&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Midpoint&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">POINT</span><span class="p">,</span> <span class="n">LINE</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">wp</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;workplane&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">midpoint</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsRatio"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.DimensionalConstraint">DimensionalConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Defines the ratio between the lengths of two line segments.</p>
<p>The order matters; the ratio is defined as length of entity1 : length of entity2.</p>

              <details class="quote">
                <summary>Source code in <code>model/ratio.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsRatio</span><span class="p">(</span><span class="n">DimensionalConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Defines the ratio between the lengths of two line segments.</span>

<span class="sd">    The order matters; the ratio is defined as length of entity1 : length of entity2.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;RATIO&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Ratio&quot;</span>

    <span class="n">value</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;UNSIGNED&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">,</span>
        <span class="nb">min</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">LINE</span><span class="p">,</span>
        <span class="n">LINE</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="n">SlvsLine2D</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,</span> <span class="n">SlvsLine2D</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>

        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">wp</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;workplane&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wp</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">ratio</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="n">e1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">line1</span><span class="p">,</span> <span class="n">line2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>
        <span class="k">if</span> <span class="n">line2</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">line1</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="n">line2</span><span class="o">.</span><span class="n">length</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">placements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div><h3 id="dimensional-constraints">Dimensional Constraints</h3>


<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsDistance"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.DimensionalConstraint">DimensionalConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Sets the distance between a point and some other entity (point/line/Workplane).</p>

              <details class="quote">
                <summary>Source code in <code>model/distance.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsDistance</span><span class="p">(</span><span class="n">DimensionalConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the distance between a point and some other entity (point/line/Workplane).&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_value_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_set_value_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_align</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">alignment</span> <span class="o">=</span> <span class="n">bpyEnum</span><span class="p">(</span><span class="n">align_items</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">identifier</span>
        <span class="n">distance</span> <span class="o">=</span> <span class="n">_get_aligned_distance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,</span> <span class="n">alignment</span><span class="p">)</span>
        <span class="n">setprop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;align&quot;</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">setprop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">distance</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_align</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;align&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Distance&quot;</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;DISTANCE&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;LENGTH&quot;</span><span class="p">,</span>
        <span class="n">precision</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">,</span>
        <span class="n">get</span><span class="o">=</span><span class="n">_get_value</span><span class="p">,</span>
        <span class="nb">set</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_set_value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">flip</span><span class="p">:</span> <span class="n">BoolProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Flip&quot;</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">)</span>
    <span class="n">align</span><span class="p">:</span> <span class="n">EnumProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Align&quot;</span><span class="p">,</span>
        <span class="n">items</span><span class="o">=</span><span class="n">align_items</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">,</span>
        <span class="n">get</span><span class="o">=</span><span class="n">_get_align</span><span class="p">,</span>
        <span class="nb">set</span><span class="o">=</span><span class="n">_set_align</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">draw_offset</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Draw Offset&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
    <span class="n">draw_outset</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Draw Outset&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;DISTANCE&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="o">*</span><span class="n">POINT</span><span class="p">,</span> <span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsCircle</span><span class="p">,</span> <span class="n">SlvsArc</span><span class="p">),</span> <span class="p">(</span><span class="o">*</span><span class="n">POINT</span><span class="p">,</span> <span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">))</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_types</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">entities</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="n">entities</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">entities</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
                <span class="c1"># Allow constraining a single line</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
                <span class="k">return</span> <span class="p">((</span><span class="n">SlvsPoint3D</span><span class="p">,),</span> <span class="p">(</span><span class="n">SlvsPoint3D</span><span class="p">,</span> <span class="n">SlvsLine3D</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">))[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">POINT2D</span><span class="p">,</span> <span class="p">(</span><span class="o">*</span><span class="n">POINT2D</span><span class="p">,</span> <span class="n">SlvsLine2D</span><span class="p">))[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">signature</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">FREE</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">OPTIONAL</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_flipping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Only use flipping for constraint between point and line/workplane</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if constraint&#39;s entities allow distance to be aligned&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns True if constraint is aligned&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_align</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span> <span class="o">!=</span> <span class="s2">&quot;NONE&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_flipping</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">flip</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="s2">&quot;Cannot create constraint between one entity itself&quot;</span><span class="p">)</span>
        <span class="c1"># TODO: don&#39;t allow Distance if Point -&gt; Line if (Point in Line)</span>

        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>
        <span class="k">if</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">p2</span>

        <span class="n">func</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">set_wp</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>
        <span class="n">alignment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span>
        <span class="n">align</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_align</span><span class="p">()</span>
        <span class="n">handles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_value</span><span class="p">()</span>

        <span class="c1"># circle/arc -&gt; line/point</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CURVE</span><span class="p">:</span>
            <span class="c1"># TODO: make Horizontal and Vertical alignment work</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">LINE</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span>
                    <span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">value</span> <span class="o">+</span> <span class="n">e1</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">wp</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span>
                    <span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">value</span> <span class="o">+</span> <span class="n">e1</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">wp</span>
                <span class="p">)</span>

        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">LINE</span><span class="p">:</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span>
            <span class="n">set_wp</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
            <span class="n">func</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">POINT</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">align</span> <span class="ow">and</span> <span class="nb">all</span><span class="p">([</span><span class="n">e</span><span class="o">.</span><span class="n">is_2d</span><span class="p">()</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">)]):</span>

                <span class="c1"># Get Point in between</span>
                <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">co</span>
                <span class="n">coords</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

                <span class="n">p</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">add_point_2d</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="o">*</span><span class="n">coords</span><span class="p">,</span> <span class="n">wp</span><span class="p">)</span>

                <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">solvesys</span><span class="o">.</span><span class="n">horizontal</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">entityB</span><span class="o">=</span><span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">solvesys</span><span class="o">.</span><span class="n">vertical</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">wp</span><span class="p">,</span> <span class="n">entityB</span><span class="o">=</span><span class="n">e1</span><span class="o">.</span><span class="n">py_data</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="n">base_point</span> <span class="o">=</span> <span class="n">e1</span> <span class="k">if</span> <span class="n">alignment</span> <span class="o">==</span> <span class="s2">&quot;VERTICAL&quot;</span> <span class="k">else</span> <span class="n">e2</span>
                <span class="n">handles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span>
                        <span class="n">group</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">base_point</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">wp</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="k">return</span> <span class="n">handles</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">func</span> <span class="o">=</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">distance</span>
            <span class="n">set_wp</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="n">args</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">set_wp</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matrix_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch_i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_2d</span><span class="p">():</span>
            <span class="c1"># TODO: Support distance in 3d</span>
            <span class="k">return</span> <span class="n">Matrix</span><span class="p">()</span>

        <span class="n">sketch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span>
        <span class="n">x_axis</span> <span class="o">=</span> <span class="n">Vector</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">alignment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span>
        <span class="n">align</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_align</span><span class="p">()</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>
        <span class="c1">#   e1       e2</span>
        <span class="c1">#   ----------------</span>
        <span class="c1">#   line     [none]</span>
        <span class="c1">#   point    point</span>
        <span class="c1">#   point    line</span>
        <span class="c1">#   arc      point</span>
        <span class="c1">#   arc      line</span>
        <span class="c1">#   circle   point</span>
        <span class="c1">#   circle   line</span>

        <span class="c1"># set p1 and p2</span>
        <span class="k">if</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
            <span class="c1"># reframe as point-&gt;point and continue</span>
            <span class="n">centerpoint</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
            <span class="k">if</span> <span class="n">e2</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
                <span class="n">p2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">intersect_point_line</span><span class="p">(</span><span class="n">centerpoint</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">)</span>
                <span class="n">p2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">co</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">centerpoint</span><span class="p">)</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">vec</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">centerpoint</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">centerpoint</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">centerpoint</span> <span class="o">+</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">Vector</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># This is a curve-&gt;line where the centerpoint of the curve is</span>
                <span class="c1"># coincident with the line.  By reassigning p1 to an endpoint</span>
                <span class="c1"># of the line, we avoid p1=p2 errors and the result is</span>
                <span class="c1"># (correctly) an invalid constraint</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>
        <span class="k">elif</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="c1"># reframe as point-&gt;point and continue</span>
            <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">p2</span>
            <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">co</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">)</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">co</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">POINT2D</span><span class="p">:</span>
            <span class="c1"># this includes &quot;Line Length&quot; (now point-&gt;point)</span>
            <span class="c1"># and curve -&gt; point</span>
            <span class="n">p2</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">co</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">align</span><span class="p">:</span>
                <span class="n">v_rotation</span> <span class="o">=</span> <span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">v_rotation</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">Vector</span><span class="p">((</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">alignment</span> <span class="o">==</span> <span class="s2">&quot;HORIZONTAL&quot;</span>
                    <span class="k">else</span> <span class="n">Vector</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">v_rotation</span><span class="o">.</span><span class="n">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="n">v_rotation</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">x_axis</span><span class="p">)</span>

            <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
            <span class="n">v_translation</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">+</span> <span class="n">p1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="k">elif</span> <span class="n">e2</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="c1"># curve -&gt; line</span>
            <span class="c1"># or point -&gt; line</span>
            <span class="k">if</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">align</span><span class="p">:</span>
                    <span class="n">v_rotation</span> <span class="o">=</span> <span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">v_rotation</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">Vector</span><span class="p">((</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">))</span>
                        <span class="k">if</span> <span class="n">alignment</span> <span class="o">==</span> <span class="s2">&quot;HORIZONTAL&quot;</span>
                        <span class="k">else</span> <span class="n">Vector</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">v_rotation</span><span class="o">.</span><span class="n">length</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">angle</span> <span class="o">=</span> <span class="n">v_rotation</span><span class="o">.</span><span class="n">angle_signed</span><span class="p">(</span><span class="n">x_axis</span><span class="p">)</span>

                <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
                <span class="n">v_translation</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">+</span> <span class="n">p1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">)</span>
                <span class="n">orig</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>
                <span class="n">end</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span>
                <span class="n">vec</span> <span class="o">=</span> <span class="n">end</span> <span class="o">-</span> <span class="n">orig</span>
                <span class="n">angle</span> <span class="o">=</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">tau</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">vec</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">vec</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
                <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
                <span class="n">p1</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">-</span> <span class="n">orig</span>
                <span class="n">v_translation</span> <span class="o">=</span> <span class="n">orig</span> <span class="o">+</span> <span class="p">(</span><span class="n">p1</span> <span class="o">+</span> <span class="n">p1</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">vec</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="n">mat_local</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="n">v_translation</span><span class="o">.</span><span class="n">to_3d</span><span class="p">())</span> <span class="o">@</span> <span class="n">mat_rot</span><span class="o">.</span><span class="n">to_4x4</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sketch</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">mat_local</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_init_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alignment</span><span class="p">):</span>
        <span class="n">e1</span><span class="p">,</span> <span class="n">e2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>

        <span class="k">if</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_3d</span><span class="p">():</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">location</span> <span class="o">-</span> <span class="n">e2</span><span class="o">.</span><span class="n">location</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>

        <span class="k">if</span> <span class="n">e1</span><span class="o">.</span><span class="n">is_line</span><span class="p">():</span>
            <span class="k">return</span> <span class="n">_get_aligned_distance</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">p1</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">p2</span><span class="p">,</span> <span class="n">alignment</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">CURVE</span><span class="p">:</span>
            <span class="n">centerpoint</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsLine2D</span><span class="p">):</span>
                <span class="n">endpoint</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">intersect_point_line</span><span class="p">(</span><span class="n">centerpoint</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsPoint2D</span><span class="p">)</span>
                <span class="n">endpoint</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">co</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">centerpoint</span> <span class="o">-</span> <span class="n">endpoint</span><span class="p">)</span><span class="o">.</span><span class="n">length</span> <span class="o">-</span> <span class="n">e1</span><span class="o">.</span><span class="n">radius</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e2</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
            <span class="c1"># Returns the signed distance to the plane</span>
            <span class="k">return</span> <span class="n">distance_point_to_plane</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">normal</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">LINE</span><span class="p">:</span>
            <span class="n">orig</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>
            <span class="n">end</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">orig</span>
            <span class="n">p1</span> <span class="o">=</span> <span class="n">e1</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">orig</span>

            <span class="c1"># NOTE: Comment from solvespace documentation:</span>
            <span class="c1"># When constraining the distance between a point and a plane,</span>
            <span class="c1"># or a point and a plane face, or a point and a line in a workplane,</span>
            <span class="c1"># the distance is signed. The distance may be positive or negative,</span>
            <span class="c1"># depending on whether the point is above or below the plane.</span>
            <span class="c1"># The distance is always shown positive on the sketch;</span>
            <span class="c1"># to flip to the other side, enter a negative value.</span>
            <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span>
                <span class="p">(</span><span class="n">p1</span> <span class="o">-</span> <span class="p">(</span><span class="n">p1</span><span class="p">)</span><span class="o">.</span><span class="n">project</span><span class="p">(</span><span class="n">end</span><span class="p">))</span><span class="o">.</span><span class="n">length</span><span class="p">,</span>
                <span class="n">get_side_of_line</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">e1</span><span class="o">.</span><span class="n">co</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">_get_aligned_distance</span><span class="p">(</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">,</span> <span class="n">alignment</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># NOTE: Flip is currently ignored when passed in kwargs</span>
        <span class="n">alignment</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;align&quot;</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_init_value</span><span class="p">(</span><span class="n">alignment</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_flipping</span><span class="p">()</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">retval</span><span class="p">[</span><span class="s2">&quot;flip&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flip</span>

        <span class="n">retval</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="n">retval</span><span class="p">[</span><span class="s2">&quot;align&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alignment</span>
        <span class="k">return</span> <span class="n">retval</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">text_inside</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ui_scale</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">ui_scale</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span><span class="p">))</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_draw_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ui_scale</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">ui_scale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span> <span class="o">=</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">ui_scale</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">draw_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layout</span><span class="p">):</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">draw_props</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="n">row</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">row</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_flipping</span><span class="p">()</span>
        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;flip&quot;</span><span class="p">)</span>

        <span class="n">sub</span><span class="o">.</span><span class="n">label</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Alignment:&quot;</span><span class="p">)</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">sub</span><span class="o">.</span><span class="n">row</span><span class="p">()</span>
        <span class="n">row</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_align</span><span class="p">()</span>
        <span class="n">row</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;align&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">preferences</span><span class="o">.</span><span class="n">is_experimental</span><span class="p">():</span>
            <span class="n">sub</span><span class="o">.</span><span class="n">prop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;draw_offset&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sub</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
        <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
        <span class="n">ui_scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">ui_scale</span>

        <span class="n">offset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
        <span class="n">outset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">outset</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsDistance.is_align" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_align</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns True if constraint is aligned</p>

            <details class="quote">
              <summary>Source code in <code>model/distance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if constraint is aligned&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_align</span><span class="p">()</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">align</span> <span class="o">!=</span> <span class="s2">&quot;NONE&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsDistance.use_align" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">use_align</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>Returns True if constraint's entities allow distance to be aligned</p>

            <details class="quote">
              <summary>Source code in <code>model/distance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">use_align</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns True if constraint&#39;s entities allow distance to be aligned&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span><span class="o">*</span><span class="n">LINE</span><span class="p">,</span> <span class="n">SlvsWorkplane</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">is_curve</span><span class="p">():</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsDistance.value_placement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">value_placement</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>location to display the constraint value</p>

            <details class="quote">
              <summary>Source code in <code>model/distance.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
    <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
    <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
    <span class="n">ui_scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">ui_scale</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
    <span class="n">outset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">outset</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsDiameter"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.DimensionalConstraint">DimensionalConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Sets the diameter of an arc or a circle.</p>

              <details class="quote">
                <summary>Source code in <code>model/diameter.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsDiameter</span><span class="p">(</span><span class="n">DimensionalConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the diameter of an arc or a circle.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_radius_getter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bl_rna</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;setting&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">use_radius_setter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">):</span>
        <span class="n">old_setting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">bl_rna</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;setting&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;setting&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">setting</span>

        <span class="n">distance</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">old_setting</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">setting</span><span class="p">:</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">old_setting</span> <span class="ow">and</span> <span class="n">setting</span><span class="p">:</span>
            <span class="n">distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="mi">2</span>

        <span class="k">if</span> <span class="n">distance</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># Avoid triggering the property&#39;s update callback</span>
            <span class="bp">self</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Radius&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span> <span class="k">else</span> <span class="s2">&quot;Diameter&quot;</span>

    <span class="n">value</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Size&quot;</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;DISTANCE&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;LENGTH&quot;</span><span class="p">,</span>
        <span class="n">precision</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">get</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_get_value</span><span class="p">,</span>
        <span class="nb">set</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_set_value</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">setting</span><span class="p">:</span> <span class="n">BoolProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Use Radius&quot;</span><span class="p">,</span> <span class="n">get</span><span class="o">=</span><span class="n">use_radius_getter</span><span class="p">,</span> <span class="nb">set</span><span class="o">=</span><span class="n">use_radius_setter</span>
    <span class="p">)</span>
    <span class="n">leader_angle</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Leader Angle&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;ANGLE&quot;</span><span class="p">)</span>
    <span class="n">draw_offset</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Draw Offset&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;DIAMETER&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">CURVE</span><span class="p">,)</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">diameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">radius</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">value</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">OPTIONAL</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">diameter</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">diameter</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_init_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">radius</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">setting</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">setting</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_init_value</span><span class="p">(</span><span class="n">setting</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">value</span><span class="p">,</span> <span class="s2">&quot;setting&quot;</span><span class="p">:</span> <span class="n">setting</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matrix_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch_i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Matrix</span><span class="p">()</span>
        <span class="n">sketch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">ct</span><span class="o">.</span><span class="n">co</span>
        <span class="n">rotation</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">leader_angle</span><span class="p">))</span>
        <span class="n">mat_local</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">to_3d</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">sketch</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">mat_local</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">text_inside</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_draw_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ui_scale</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span> <span class="o">=</span> <span class="n">pos</span><span class="o">.</span><span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leader_angle</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
        <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">leader_angle</span><span class="p">)</span>
        <span class="n">coords2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsDiameter.value_placement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">value_placement</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>location to display the constraint value</p>

            <details class="quote">
              <summary>Source code in <code>model/diameter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
    <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
    <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">leader_angle</span><span class="p">)</span>
    <span class="n">coords2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords2</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<a id="CAD_Sketcher.model.types.SlvsAngle"></a>
    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="CAD_Sketcher.model.base_constraint.DimensionalConstraint">DimensionalConstraint</span></code>, <code><span title="bpy.types.PropertyGroup">PropertyGroup</span></code></p>


      <p>Sets the angle between two lines, applies in 2D only.</p>
<p>The constraint's setting can be used to to constrain the supplementary angle.</p>

              <details class="quote">
                <summary>Source code in <code>model/angle.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SlvsAngle</span><span class="p">(</span><span class="n">DimensionalConstraint</span><span class="p">,</span> <span class="n">PropertyGroup</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the angle between two lines, applies in 2D only.</span>

<span class="sd">    The constraint&#39;s setting can be used to to constrain the supplementary angle.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">assign_init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Context</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># Updating self.setting will create recursion loop</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">assign_init_props</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

        <span class="n">line1</span><span class="p">,</span> <span class="n">line2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>
        <span class="n">origin</span> <span class="o">=</span> <span class="n">get_line_intersection</span><span class="p">(</span>
            <span class="o">*</span><span class="n">line_abc_form</span><span class="p">(</span><span class="n">line1</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">line1</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">),</span>
            <span class="o">*</span><span class="n">line_abc_form</span><span class="p">(</span><span class="n">line2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">line2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">dist</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
            <span class="p">(</span><span class="n">line1</span><span class="o">.</span><span class="n">midpoint</span><span class="p">()</span> <span class="o">-</span> <span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="p">(</span><span class="n">line2</span><span class="o">.</span><span class="n">midpoint</span><span class="p">()</span> <span class="o">-</span> <span class="n">origin</span><span class="p">)</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="mf">0.5</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span> <span class="o">=</span> <span class="n">dist</span> <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span> <span class="k">else</span> <span class="o">-</span><span class="n">dist</span>

    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;Angle&quot;</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
        <span class="n">subtype</span><span class="o">=</span><span class="s2">&quot;ANGLE&quot;</span><span class="p">,</span>
        <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;ROTATION&quot;</span><span class="p">,</span>
        <span class="n">precision</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">update_system_cb</span><span class="p">,</span>
        <span class="n">get</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_get_value</span><span class="p">,</span>
        <span class="nb">set</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">_set_value</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">setting</span><span class="p">:</span> <span class="n">BoolProperty</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Measure supplementary angle&quot;</span><span class="p">,</span>
        <span class="n">update</span><span class="o">=</span><span class="n">DimensionalConstraint</span><span class="o">.</span><span class="n">assign_init_props</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">draw_offset</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Draw Offset&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">draw_outset</span><span class="p">:</span> <span class="n">FloatProperty</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Draw Outset&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;ANGLE&quot;</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="p">((</span><span class="n">SlvsLine2D</span><span class="p">,),</span> <span class="p">(</span><span class="n">SlvsLine2D</span><span class="p">,))</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">needs_wp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">WpReq</span><span class="o">.</span><span class="n">NOT_FREE</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_displayed_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HALF_TURN</span> <span class="o">-</span> <span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span> <span class="k">else</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">from_displayed_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">HALF_TURN</span> <span class="o">-</span> <span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span> <span class="k">else</span> <span class="n">value</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">create_slvs_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvesys</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="n">Solver</span><span class="o">.</span><span class="n">group_fixed</span><span class="p">):</span>
        <span class="n">wp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_workplane</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">solvesys</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span>
            <span class="n">group</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">py_data</span><span class="p">,</span>
            <span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
            <span class="n">wp</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">matrix_basis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch_i</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Matrix</span><span class="p">()</span>

        <span class="n">sketch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sketch</span>

        <span class="n">line1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span>
        <span class="n">line2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span>

        <span class="n">origin</span> <span class="o">=</span> <span class="n">get_line_intersection</span><span class="p">(</span>
            <span class="o">*</span><span class="n">line_abc_form</span><span class="p">(</span><span class="n">line1</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">line1</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">),</span>
            <span class="o">*</span><span class="n">line_abc_form</span><span class="p">(</span><span class="n">line2</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span><span class="p">,</span> <span class="n">line2</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">rotation</span> <span class="o">=</span> <span class="n">range_2pi</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="n">line2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">orientation</span><span class="p">(</span><span class="n">line1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">:</span>
            <span class="n">rotation</span> <span class="o">=</span> <span class="n">rotation</span> <span class="o">-</span> <span class="n">QUARTER_TURN</span>

        <span class="n">mat_rot</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Rotation</span><span class="p">(</span><span class="n">rotation</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
        <span class="n">mat_local</span> <span class="o">=</span> <span class="n">Matrix</span><span class="o">.</span><span class="n">Translation</span><span class="p">(</span><span class="n">origin</span><span class="o">.</span><span class="n">to_3d</span><span class="p">())</span> <span class="o">@</span> <span class="n">mat_rot</span><span class="o">.</span><span class="n">to_4x4</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">sketch</span><span class="o">.</span><span class="n">wp</span><span class="o">.</span><span class="n">matrix_basis</span> <span class="o">@</span> <span class="n">mat_local</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">orientation</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">p2</span><span class="o">.</span><span class="n">co</span> <span class="o">-</span> <span class="n">line</span><span class="o">.</span><span class="n">p1</span><span class="o">.</span><span class="n">co</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">pos</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pos</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_get_angle</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
        <span class="c1"># (A dot B)/(|A||B|) = cos(valA)</span>
        <span class="n">divisor</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">B</span><span class="o">.</span><span class="n">length</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">divisor</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="o">/</span> <span class="n">divisor</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">acos</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_init_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setting</span><span class="p">):</span>
        <span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity1</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">entity2</span><span class="o">.</span><span class="n">direction_vec</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_angle</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initializes value (angle, in radians),</span>
<span class="sd">            setting (&quot;measure supplimentary angle&quot;)</span>
<span class="sd">            and distance to dimension text (draw_offset)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">setting</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">)</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_init_value</span><span class="p">(</span><span class="n">setting</span><span class="p">))</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span>
            <span class="s2">&quot;setting&quot;</span><span class="p">:</span> <span class="n">setting</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">text_inside</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_draw_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ui_scale</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="n">ui_scale</span><span class="p">,</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
        <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
        <span class="n">ui_scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">ui_scale</span>

        <span class="n">offset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
        <span class="n">outset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span>
        <span class="n">co</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">outset</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">co</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">co</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsAngle.init_props" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">init_props</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>initializes value (angle, in radians),
    setting ("measure supplimentary angle")
    and distance to dimension text (draw_offset)</p>

            <details class="quote">
              <summary>Source code in <code>model/angle.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    initializes value (angle, in radians),</span>
<span class="sd">        setting (&quot;measure supplimentary angle&quot;)</span>
<span class="sd">        and distance to dimension text (draw_offset)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">setting</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">setting</span><span class="p">)</span>
    <span class="n">angle</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_init_value</span><span class="p">(</span><span class="n">setting</span><span class="p">))</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="n">angle</span><span class="p">),</span>
        <span class="s2">&quot;setting&quot;</span><span class="p">:</span> <span class="n">setting</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="CAD_Sketcher.model.types.SlvsAngle.value_placement" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">value_placement</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

      <p>location to display the constraint value</p>

            <details class="quote">
              <summary>Source code in <code>model/angle.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">value_placement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;location to display the constraint value&quot;&quot;&quot;</span>
    <span class="n">region</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">region</span>
    <span class="n">rv3d</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">space_data</span><span class="o">.</span><span class="n">region_3d</span>
    <span class="n">ui_scale</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">preferences</span><span class="o">.</span><span class="n">system</span><span class="o">.</span><span class="n">ui_scale</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="n">ui_scale</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_offset</span>
    <span class="n">outset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_outset</span>
    <span class="n">co</span> <span class="o">=</span> <span class="n">pol2cart</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">outset</span><span class="p">)</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">matrix_basis</span><span class="p">()</span> <span class="o">@</span> <span class="n">Vector</span><span class="p">((</span><span class="n">co</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">co</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">location_3d_to_region_2d</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">rv3d</span><span class="p">,</span> <span class="n">coords</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
    
  </body>
</html>